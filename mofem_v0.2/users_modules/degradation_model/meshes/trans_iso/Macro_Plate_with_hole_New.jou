reset

# Geometry (all dimension for macro is in meter [mm])
brick x 10 y 10 z 1
create cylinder height 60 radius 5
move volume 2 x -5 y -5 z 0 include_merged
subtract volume 2 from volume 1
brick x 10 y 10 z 1
move volume 3 x 0 y 10 z 0 include_merged
unite volume all

#Meshing   
curve 25 24 1 19 17 18 16 10 34 33  size auto factor 4
curve 25 24 1 19 17 18 16 10 34 33 scheme equal
mesh curve 25 24 1 19 17 18 16 10 34 33 

surface 11  scheme TriMesh 
mesh surface 11  
 
surface 13 scheme mirror source surface 11 source vertex 13 target vertex 11 nosmoothing 
mesh surface 13  
 
surface 14 12 10 6 19  scheme TriMesh 
mesh surface 14 12 10 6 19  

#volume all size auto factor 10 
volume all scheme Tetmesh 
mesh volume all 

set duplicate block elements on
# Bounary Conditions for Heat Transfer Macro problem
create temperature on surface 19 value 30   #[deg C]
create heatflux on surface 6 value 1 # +ve value means heat out (Watt/m2)

# Bounary Conditions for Moisture Transport Macro problem
# block 1 surface 5, 6, 13, 10
block 1 surface 19
block 1 name 'MASS_CONC'
block 1 attribute count 1   
block 1 attribute index 1 0.7 # relative humidity 

block 2 surface 6
block 2 name 'MASS_FLUX'
block 2 attribute count 1
block 2 attribute index 1 0.5e-9

# Bounary Conditions for Mechanical Macro problem
create displacement on surface 14 dof 1 fix 0
create displacement on surface 12 dof 2 fix 0
create displacement on surface 13 dof 3 fix 0
create force on surface 19 vector 0 1e6 0 0 0 0

#Here thermal conductivity and moisture diffusivity homogenised matrices will be read directly from input RVE binary files so no need to defined material properties here
block 3 volume all
block 3 name 'MAT_RVE_THERMAL' 
block 3 attribute count 2
block 3 attribute index 1 1  #Conductivity (This will not used as this will read from homogenisation)
block 3 attribute index 2 1.4634e3  #HeatCapacity (density*cp)

block 4 volume all  
block 4 name 'MAT_RVE_DIFFUSION' 
block 4 attribute count 1
#block 4 attribute index 1 1 moisture diffusivity (This will not used as this will read from homogenisation)


#Mechanical Macro material properties (Matrix part)
block 5 volume all  
block 5 name 'MAT_ELASTIC'
block 5 attribute count 2
block 5 attribute index 1 1   #Young's modulus  (This will not be used in the calculation)
block 5 attribute index 2 0   #Poisson's ratio (This will not be used in the calculation)

#Mark elements to see the strain for plotting different RVEs 
set duplicate block elements on
block 6 tet 816 810 136 1158 1593
block 6 name "Ele_Strain_RVE"

save as "/Users/zahur/Documents/moFEM/mofem-cephas/mofem_v0.2/users_modules/degradation_model/meshes/trans_iso/Macro_Plate_with_hole_New.cub" overwrite













