Steps
==================================================================
1. homogenisation of thermal RVE            (save output to thermal_Dmat.out binary file)
2. homogenisation of moisture diffusion RVE (save output to diffusion_Dmat.out binary file)

1. Run thermal_unsteady save output as solution.h5m and out_.vtk (conductivity for this is read from thermal_Dmat.out)
2. Run moisture_unsteady save output as solution_mois.h5m and and Conc_.vtk (conductivity/density for this is read from diffusion_Dmat.out )
3. Run calculate_wt (with input solution_mois.h5m)
4. Run mech_marc which is FE2 problem with two input meshes (micro RVE and macro) here macro-mesh=solution_wt.h5m 
                                                                                  and  RVE-mesh  = RVE_Cube_mech.cub


Example computational homogenisation for Thermal RVE (Textile RVE)
============================================================
---- RVE displacement BCs
make Thermal_Disp_MRhs && mpirun -np 1 ./Thermal_Disp_MRhs -my_file ../users_modules/degradation_model/meshes/trans_iso/Textile_RVE_Thermal.cub  -ksp_type fgmres -pc_type lu -pc_factor_mat_solver_package superlu_dist -ksp_monitor -my_output_file_Dmat thermal_Dmat.out -my_order 1

---- RVE Periodic BCs
make Thermal_Periodic_MRhs && mpirun -np 1 ./Thermal_Periodic_MRhs -my_file ../users_modules/degradation_model/meshes/trans_iso/Textile_RVE_Thermal.cub  -ksp_type fgmres -pc_type lu -pc_factor_mat_solver_package superlu_dist -ksp_monitor -my_output_file_Dmat thermal_Dmat.out -my_order 1


Example computational homogenisation for moisture transport RVE (Textile RVE)
============================================================
---- RVE displacement BCs
make MoistureTrans_Disp_MRhs_with_incl && mpirun -np 1 ./MoistureTrans_Disp_MRhs_with_incl -my_file ../users_modules/degradation_model/meshes/trans_iso/Textile_RVE_moisture.cub -ksp_type fgmres -pc_type lu -pc_factor_mat_solver_package superlu_dist -ksp_monitor -my_output_file_Dmat diffusion_Dmat.out -my_order 1

---- RVE Periodic BCs
make MoistureTrans_Periodic_MRhs_with_incl && mpirun -np 1 ./MoistureTrans_Periodic_MRhs_with_incl -my_file ../users_modules/degradation_model/meshes/trans_iso/Textile_RVE_moisture.cub -ksp_type fgmres -pc_type lu -pc_factor_mat_solver_package superlu_dist -ksp_monitor -my_output_file_Dmat diffusion_Dmat.out -my_order 1



Unsteady thermal macro problem (run for 1000 days) (time here in seconds)
============================================================
make thermal_unsteady_inputDmat && mpirun -np 8 ./thermal_unsteady_inputDmat \
-my_file ../users_modules/degradation_model/meshes/trans_iso/Macro_Plate_with_hole.cub \
  -ksp_type fgmres -pc_type lu -pc_factor_mat_solver_package superlu_dist -ksp_monitor \
  -snes_type newtonls -snes_linesearch_type basic -snes_max_it 100 -snes_atol 1e-8 -snes_rtol 1e-8 -snes_monitor \
  -ts_monitor -ts_type beuler -ts_dt 864000 -ts_final_time 86400000 -snes_lag_jacobian -2 \
  -my_order 1 -my_max_post_proc_ref_level 0


Unsteady moisture macro problem
============================================================
make diffusion_unsteady_inputDmat && mpirun -np 8 ./diffusion_unsteady_inputDmat \
-my_file solution.h5m \
  -ksp_type fgmres -pc_type lu -pc_factor_mat_solver_package superlu_dist -ksp_monitor \
  -snes_type newtonls -snes_linesearch_type basic -snes_max_it 100 -snes_atol 1e-8 -snes_rtol 1e-8 -snes_monitor \
  -ts_monitor -ts_type beuler -ts_dt 864000 -ts_final_time 86400000 -snes_lag_jacobian -2 \
  -my_order 1 -my_max_post_proc_ref_level 0


calculate_wt used to calculate degredaiton (1-wt)
============================================================
make wt_unsteady_macro && mpirun -np 8 ./wt_unsteady_macro \
-my_file solution_mois.h5m \
  -ksp_type fgmres -pc_type lu -pc_factor_mat_solver_package superlu_dist -ksp_monitor \
  -snes_type newtonls -snes_linesearch_type basic -snes_max_it 100 -snes_atol 1e-8 -snes_rtol 1e-8 -snes_monitor \
  -ts_monitor -ts_type beuler -ts_dt 10 -ts_final_time 1000 -snes_lag_jacobian -2 \
  -my_order 1 -my_max_post_proc_ref_level 0 \
  -my_saturation_conc 1


Mechanical problem with RVE (both matrix and fibres are isotropic materials)
============================================================
make mech_macro_iso_Disp && mpirun -np 8 ./mech_macro_iso_Disp \
-my_file_Macro solution_wt.h5m -my_file_RVE ../users_modules/degradation_model/meshes/Using_Textile_RVE/Textile_RVE_Mechanical.cub\
  -ksp_type fgmres -pc_type lu -pc_factor_mat_solver_package superlu_dist \
  -my_max_post_proc_ref_level 0 -my_order 1 \

Calculate strain at selected gauss points to see the deformed RVEs
===========================================================================
make Strain_calculation && mpirun -np 1 ./Strain_calculation -my_file FE2_solution_100.h5m -ksp_type fgmres -pc_type asm -sub_pc_type lu -ksp_monitor -my_order 1

mpirun -np 1 ../homogenisation/Cube_With_Inclusion_Disp -my_file ../users_modules/degradation_model/meshes/trans_iso/Textile_RVE_Mechanical.cub -ksp_type fgmres -pc_type lu -pc_factor_mat_solver_package superlu_dist -ksp_monitor -my_order 1 -myapplied_strain 0.00752721,0.0164638,-0.00885303,-0.0265241,0.000197552,-0.000709495



-0.0018056,0.0160905,-0.00713621,0.00061125,-4.64714e-06,-5.05443e-06
-0.00760946,0.0594774,-0.0181889,-0.00709124,0.005848,0.00232902
-0.00218694,0.0138932,-0.00591834,0.00176301,0.00023224,0.000105632
-0.0406652,0.00217073,0.00540522,-0.0228235,-0.00190902,-0.00396564
0.00752721,0.0164638,-0.00885303,-0.0265241,0.000197552,-0.000709495


Mechanical problem with RVE (isotropic matrix and tansverse-isotropic fibres)
==========================================================================================
==== Potential flow for fibre directions 
mpirun -np 1 ../homogenisation/TransIso_Potential_Flow_NoInt -my_file ../users_modules/degradation_model/meshes/trans_iso/Textile_RVE_Mechanical.cub -ksp_type fgmres -pc_type lu -pc_factor_mat_solver_package superlu_dist -ksp_monitor -my_order 3

======= Periodic BCs
make mech_macro_transIso_Periodic && mpirun -np 1 ./mech_macro_transIso_Periodic \
-my_file_Macro solution_wt.h5m -my_file_RVE solution_RVE.h5m\
  -ksp_type fgmres -pc_type lu -pc_factor_mat_solver_package superlu_dist \
  -my_max_post_proc_ref_level 0 -my_order 1 -my_order_RVE 3\



Conversion from .h5m to vtk
============================================================
One file conversion
/opt/petsc/arch-linux2-c-opt/bin/mbconvert FE2_out_0.h5m FE2_out_0.vtk

All files conversion using script
./do_vtk1.sh FE2_out_*.h5m

cp *.vtk /mnt/home/Desktop/aaaa/

rm *.vtk *.info *.h5m *.out



