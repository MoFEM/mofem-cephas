#!python
cubit.cmd('new')

autofactor=10; 
cubit.cmd('brick x 1 y 1 z 1')
cubit.cmd('brick x 1 y 0.4 z 0.4')

cubit.cmd('subtract volume 2 from volume 1 keep')
cubit.cmd('delete volume 1') 
cubit.cmd('imprint volume 2 3')   
cubit.cmd('merge volume 2 3') 

#Matrix with only diffusion (need only coeffitient of diffusion)
cubit.cmd('block 1 volume 3  ') 
cubit.cmd('block 1 name "MAT_MOISTURE_MATRIX"') 
cubit.cmd('block 1 attribute count 1') 
cubit.cmd('block 1 attribute index 1 1')   #Diffusivity

#Fibre with only capilary transport (need both permieability and viscocity )
cubit.cmd('block 2 volume  2 ') 
cubit.cmd('block 2 name "MAT_MOISTURE_FIBRE"') 
cubit.cmd('block 2 attribute count 3') 
cubit.cmd('block 2 attribute index 1 1')  #Diffusivity
cubit.cmd('block 2 attribute index 2 1')  #Viscosity
cubit.cmd('block 2 attribute index 3 1')  #Permeability

cubit.cmd('surface 20 scheme trimesh') 
str1='surface 20  size auto factor '+str(autofactor); cubit.cmd(str1)
cubit.cmd('mesh surface 20') 
cubit.cmd('surface 22 scheme copy source surface 20 source vertex 27 target vertex 26 source curve 47 target curve 48 nosmoothing')
cubit.cmd('mesh surface 22') 

cubit.cmd('surface 10 scheme trimesh') 
str1='surface 10  size auto factor '+str(autofactor); cubit.cmd(str1)
cubit.cmd('mesh surface 10') 
cubit.cmd('surface 12 scheme copy source surface 10 source vertex 11 target vertex 10 source curve 23 target curve 24 nosmoothing')
cubit.cmd('mesh surface 12') 

cubit.cmd('surface 17 scheme trimesh') 
str1='surface 17  size auto factor '+str(autofactor); cubit.cmd(str1)
cubit.cmd('mesh surface 17') 
cubit.cmd('surface 18 scheme copy source surface 17 source vertex 26 target vertex 29 source curve 38 target curve 44 nosmoothing')
cubit.cmd('mesh surface 18') 

cubit.cmd('surface 19 scheme trimesh') 
str1='surface 19  size auto factor '+str(autofactor); cubit.cmd(str1)
cubit.cmd('mesh surface 19') 
cubit.cmd('surface 21 scheme copy source surface 19 source vertex 28 target vertex 27 source curve 45 target curve 47 nosmoothing')
cubit.cmd('mesh surface 21') 

str1='volume all size auto factor '+str(autofactor); cubit.cmd(str1)
cubit.cmd('volume all scheme tetmesh')  
cubit.cmd('mesh volume all')  

#cubit.cmd('sideset 101 surface 20 10 19 18')  # all -ve boundary surfaces  
#cubit.cmd('sideset 102 surface 21 17 22 12')  # all +ve boundary surfaces  
#cubit.cmd('sideset 103 surface 20 10 19 18 21 17 22 12')  # all boundary surfaces  

cubit.cmd('sideset 101 surface 10 12')  # all boundary surface for fibres  
cubit.cmd('sideset 102 surface 17 18 19 20 21 22')  # all boundary surface for matrix  

cubit.cmd('save as "/Users/zahur/Documents/moFEM/mofem-cephas/mofem_v0.2/users_modules/homogenisation/meshes/Darceys_and_Diffusion.cub" overwrite')










