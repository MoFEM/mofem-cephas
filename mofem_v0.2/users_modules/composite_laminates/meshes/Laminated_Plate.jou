#!python
cubit.cmd('reset')

# Geometry (all dimension for macro is in meter [mm])'
h=0.132 ; L=16*h
str1='brick x ' + str(L) + ' y ' + str(L) +' z ' + str(h);   cubit.cmd(str1)
str1='brick x ' + str(L) + ' y ' + str(L) +' z ' + str(h);   cubit.cmd(str1)
str1='move volume 2 x 0 y 0 z '+str(h)+'include_merged';   cubit.cmd(str1)
str1='move volume all x '+str(0) +' y '+ str(0) + ' z '+str(h/2)+'include_merged';   cubit.cmd(str1)

cubit.cmd('imprint volume all ')
cubit.cmd('merge volume all ')

cubit.cmd('volume all size auto factor 8')
cubit.cmd('volume all scheme tetmesh')
cubit.cmd('mesh volume all ')

#Material Blocks 1 for 0 deg
cubit.cmd('set duplicate block elements on')
cubit.cmd('block 1 volume 1')  
cubit.cmd('block 1 name "MAT_ELASTIC_0deg"')
cubit.cmd('block 1 attribute count 2')
cubit.cmd('block 1 attribute index 1 1')   #Young's modulus  (This will not be used in the calculation)
cubit.cmd('block 1 attribute index 2 0')   #Poisson's ratio (This will not be used in the calculation)

#Material Blocks 1 for 90 deg
cubit.cmd('block 2 volume 2')  
cubit.cmd('block 2 name "MAT_ELASTIC_90deg"')
cubit.cmd('block 2 attribute count 2')
cubit.cmd('block 2 attribute index 1 1')   #Young's modulus  (This will not be used in the calculation)
cubit.cmd('block 2 attribute index 2 0')   #Poisson's ratio (This will not be used in the calculation)

#Applied displacement
#str1='create displacement on surface 6  12 dof 1 fix ' + str(L*1e-6);  cubit.cmd(str1)
#str1='create displacement on surface 4 10 dof 1 fix ' + str(-L*1e-6);  cubit.cmd(str1)

str1='create displacement on surface 6  12 dof 1 fix ' + str(1);  cubit.cmd(str1)
str1='create displacement on surface 4 10 dof 1 fix ' + str(-1);  cubit.cmd(str1)

#cubit.cmd('create force on surface 6 vector 1 0 0 0 0 0')  
#cubit.cmd('create force on surface 12 vector 1 0 0 0 0 0')  
#cubit.cmd('create force on surface 4 vector -1 0 0 0 0 0')  
#cubit.cmd('create force on surface 10 vector -1 0 0 0 0 0')  

cubit.cmd('save as "/Users/zahur/Documents/moFEM/mofem-cephas/mofem_v0.2/users_modules/composite_laminates/meshes/Laminated_Plate.cub" overwrite')  


